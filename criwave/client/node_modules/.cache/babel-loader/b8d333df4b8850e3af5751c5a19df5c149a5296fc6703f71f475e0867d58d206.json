{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport \"core-js/modules/es.iterator.constructor.js\";\nimport \"core-js/modules/es.iterator.every.js\";\nimport \"core-js/modules/es.iterator.filter.js\";\nimport \"core-js/modules/es.iterator.for-each.js\";\nimport \"core-js/modules/es.iterator.map.js\";\n/**\n * Componente de menú lateral\n * \n * Se muestra al hacer clic en el logo del header\n * Contiene enlaces a las diferentes secciones de la aplicación\n * \n * @component AppSidebar\n */\nimport { ref, computed, onMounted, onBeforeUnmount } from 'vue';\nimport { useStore } from 'vuex';\nimport SearchBar from '../ui/SearchBar.vue';\nimport MenuItem from './MenuItem.vue';\nimport { navigationConfig } from '../../config/navigation';\nimport { setupMenuListeners } from './MenuListeners';\nimport { Heart, X } from 'lucide-vue-next';\nexport default {\n  name: 'AppSidebar',\n  components: {\n    SearchBar,\n    MenuItem,\n    Heart,\n    X\n  },\n  props: {\n    /**\n     * Indica si el sidebar está abierto o cerrado\n     */\n    isOpen: {\n      type: Boolean,\n      default: false\n    }\n  },\n  emits: ['close'],\n  setup(props, {\n    emit\n  }) {\n    const store = useStore();\n    const isMobile = ref(window.innerWidth <= 768);\n    const searchQuery = ref('');\n\n    // Referencia para almacenar la función de limpieza de los listeners\n    const menuListenersCleanup = ref(null);\n\n    // Información sobre la sugerencia resaltada actualmente\n    const highlightedIndex = ref(-1);\n    const highlightedType = ref(''); // 'menu', 'action'\n\n    // Cache para resultados de búsqueda\n    const searchCache = ref(new Map());\n\n    // Favoritos dinámicos - guardar historial de visitas\n    const favoriteItems = ref([]);\n\n    // Los contadores de visitas no se muestran, ya que el orden indica la relevancia\n    const showVisitCount = ref(false);\n\n    // Config de navegación - cargar desde archivo de configuración\n    const navigationItems = ref(navigationConfig);\n\n    // Computed properties\n\n    // Determina la imagen del logo según el tema actual\n    const logoSrc = computed(() => {\n      return store.getters['theme/isDark'] ? '/img/criwavelogo.png' : '/img/criwavelogoN.png';\n    });\n\n    // Aplanar la estructura jerárquica de elementos de navegación para la búsqueda\n    const flattenedNavigationItems = computed(() => {\n      const flattened = [];\n\n      // Función recursiva para aplanar la estructura\n      const flatten = (items, parentPath = null) => {\n        items.forEach(item => {\n          // Determinar la ruta completa de jerarquía\n          const currentPath = parentPath ? `${parentPath} > ${item.text}` : item.text;\n\n          // Crear una copia del elemento con información del padre si existe\n          const flatItem = {\n            ...item,\n            parent: parentPath\n          };\n\n          // Añadir a la lista aplanada\n          flattened.push(flatItem);\n\n          // Procesar hijos si existen\n          if (item.children && item.children.length > 0) {\n            flatten(item.children, currentPath);\n          }\n        });\n      };\n\n      // Comenzar el proceso de aplanamiento\n      flatten(navigationItems.value);\n      return flattened;\n    });\n\n    // Funciones para filtrar elementos según la búsqueda\n    const prepareSearchTerms = query => {\n      return query.toLowerCase().trim().split(/\\s+/);\n    };\n    const itemMatchesSearch = (item, queryTerms) => {\n      const itemText = item.text.toLowerCase();\n      // Verificar si todos los términos de búsqueda están en el texto del elemento\n      return queryTerms.every(term => itemText.includes(term));\n    };\n\n    // Filtrar elementos de navegación aplanados para resultados de búsqueda\n    const flattenedFilteredItems = computed(() => {\n      if (!searchQuery.value) return [];\n      const queryTerms = prepareSearchTerms(searchQuery.value);\n      return flattenedNavigationItems.value.filter(item => itemMatchesSearch(item, queryTerms));\n    });\n\n    // Filtra las acciones rápidas según la búsqueda\n    const filteredQuickActions = computed(() => {\n      return []; // Ya no hay acciones rápidas\n    });\n\n    // Verifica si hay resultados en la búsqueda actual\n    const hasSearchResults = computed(() => {\n      // Si no hay consulta, siempre hay resultados\n      if (!searchQuery.value) return true;\n\n      // Verifica si hay algún elemento en los resultados filtrados\n      return flattenedFilteredItems.value.length > 0;\n    });\n\n    // Métodos\n\n    // Cierra el sidebar\n    const closeSidebar = () => {\n      emit('close');\n    };\n\n    // Comprueba si el dispositivo es móvil\n    const checkMobile = () => {\n      isMobile.value = window.innerWidth <= 768;\n    };\n\n    // Actualiza la consulta de búsqueda\n    const filterItems = query => {\n      // Si la consulta es la misma, no hacer nada\n      if (searchQuery.value === query) return;\n      searchQuery.value = query;\n      highlightedIndex.value = -1;\n      highlightedType.value = '';\n\n      // Guarda la consulta en el almacenamiento local para persistencia\n      if (query && query.length > 2) {\n        saveRecentSearch(query);\n      }\n    };\n\n    // Guarda una búsqueda reciente en el almacenamiento local\n    const saveRecentSearch = query => {\n      try {\n        // Obtener búsquedas recientes almacenadas\n        const recentSearches = JSON.parse(localStorage.getItem('recentSearches') || '[]');\n\n        // Eliminar duplicados\n        const filteredSearches = recentSearches.filter(search => search !== query);\n\n        // Añadir la nueva búsqueda al principio\n        filteredSearches.unshift(query);\n\n        // Mantener sólo las 5 búsquedas más recientes\n        const limitedSearches = filteredSearches.slice(0, 5);\n\n        // Guardar en localStorage\n        localStorage.setItem('recentSearches', JSON.stringify(limitedSearches));\n      } catch (error) {\n        console.error('Error al guardar búsqueda reciente:', error);\n      }\n    };\n\n    // Resalta texto en los resultados de búsqueda\n    const highlightText = text => {\n      if (!searchQuery.value) return text;\n      const escapedQuery = searchQuery.value.replace(/[.*+?^${}()|[\\]\\\\]/g, '\\\\$&');\n      const regex = new RegExp(`(${escapedQuery})`, 'gi');\n      return text.replace(regex, '<span class=\"highlight\">$1</span>');\n    };\n\n    // Maneja clic en elementos del menú\n    const handleItemClick = item => {\n      // Registrar visita para estadísticas de favoritos\n      registerVisit(item);\n\n      // Navegar a la página solo si tiene href y no tiene hijos, o si explícitamente tiene href\n      if (item.href && (!item.children || item.children.length === 0)) {\n        window.location.href = item.href;\n      }\n\n      // Cerrar el sidebar en dispositivos móviles\n      if (isMobile.value) {\n        closeSidebar();\n      }\n    };\n\n    // Maneja clic en sugerencia\n    const handleSuggestionClick = item => {\n      handleItemClick(item);\n    };\n\n    // Función para registrar visitas y actualizar frecuentes\n    const registerVisit = item => {\n      try {\n        // Intentar obtener el historial existente\n        const visitHistory = JSON.parse(localStorage.getItem('visitHistory') || '{}');\n\n        // Asegurarse de que el item tenga href\n        if (!item.href) {\n          return; // Salir si no hay href definido\n        }\n\n        // Crear un ID único para el elemento basado en su texto y href\n        // Si hay un padre, incluirlo en el ID para distinguir elementos con el mismo nombre\n        const itemPath = item.parent ? `${item.parent} > ${item.text}` : item.text;\n        const itemId = `${itemPath}-${item.href}`;\n\n        // Verificar si es la primera visita (para animación)\n        const isFirstVisit = !visitHistory[itemId];\n        const oldCount = visitHistory[itemId] || 0;\n\n        // Incrementar contador o inicializarlo\n        visitHistory[itemId] = oldCount + 1;\n\n        // Imprimir para depuración (podemos quitar después)\n        console.log(`Registrando visita para: ${itemPath}, contador: ${visitHistory[itemId]}`);\n\n        // Guardar en localStorage\n        localStorage.setItem('visitHistory', JSON.stringify(visitHistory));\n\n        // Actualizar frecuentes basados en el historial\n        updateFrequent();\n\n        // Agregar efecto visual (parpadeo) al elemento si es el primero\n        if (isFirstVisit) {\n          setTimeout(() => {\n            // Buscar el elemento relevante y agregar una clase de animación\n            const allItems = document.querySelectorAll('.nav-link');\n            allItems.forEach(el => {\n              const textElement = el.querySelector('.nav-text');\n              if (textElement && textElement.textContent.includes(item.text)) {\n                el.classList.add('just-visited');\n                setTimeout(() => {\n                  el.classList.remove('just-visited');\n                }, 1000);\n              }\n            });\n          }, 100);\n        }\n      } catch (error) {\n        console.error('Error al registrar visita:', error);\n      }\n    };\n\n    // Maneja los atajos de teclado\n    const handleKeyboardShortcuts = event => {\n      // Ctrl/Cmd + K para enfocar el buscador\n      if ((event.ctrlKey || event.metaKey) && event.key === 'k') {\n        event.preventDefault();\n        const searchBar = document.querySelector('.search-input');\n        if (searchBar) {\n          searchBar.focus();\n        }\n      }\n    };\n\n    // Maneja la selección de sugerencias\n    const handleSuggestionHighlight = index => {\n      // Para log si es necesario\n      console.log('Sugerencia resaltada:', index);\n    };\n    const handleSuggestionSelect = suggestion => {\n      // Para log si es necesario\n      console.log('Sugerencia seleccionada:', suggestion);\n    };\n\n    // Resalta una sugerencia\n    const highlightSuggestion = (index, type) => {\n      highlightedIndex.value = index;\n      highlightedType.value = type;\n    };\n\n    // Implementar funciones para aplicar sugerencias\n    const applyMainSuggestion = item => {\n      handleItemClick(item);\n    };\n    const applySectionSuggestion = item => {\n      handleItemClick(item);\n    };\n    const applyActionSuggestion = action => {\n      if (action && action.action) {\n        action.action();\n      }\n    };\n\n    // Actualizar frecuentes basados en el historial de visitas\n    const updateFrequent = () => {\n      try {\n        // Obtener historial de visitas\n        const visitHistory = JSON.parse(localStorage.getItem('visitHistory') || '{}');\n\n        // Si no hay historial, no mostrar frecuentes\n        if (Object.keys(visitHistory).length === 0) {\n          favoriteItems.value = [];\n          return;\n        }\n\n        // Obtener todos los elementos aplanados para encontrar los más visitados\n        const allItems = flattenedNavigationItems.value;\n\n        // Imprimir información de depuración (podemos quitar después)\n        console.log('Items aplanados:', allItems.length);\n\n        // Filtrar elementos sin href\n        const validItems = allItems.filter(item => item.href);\n\n        // Crear array de elementos con su frecuencia de visitas\n        const itemsWithFrequency = validItems.map(item => {\n          // Crear una clave con el formato que usamos al guardar\n          const itemPath = item.parent ? `${item.parent} > ${item.text}` : item.text;\n          const itemId = `${itemPath}-${item.href}`;\n          const frequency = visitHistory[itemId] || 0;\n\n          // Imprimir elementos con frecuencia (podemos quitar después)\n          if (frequency > 0) {\n            console.log(`Item: ${itemPath}, frecuencia: ${frequency}`);\n          }\n          return {\n            ...item,\n            frequency\n          };\n        });\n\n        // Ordenar por frecuencia de visitas (descendente)\n        itemsWithFrequency.sort((a, b) => b.frequency - a.frequency);\n\n        // Tomar los elementos más visitados (con al menos 1 visita)\n        const mostVisitedItems = itemsWithFrequency.filter(item => item.frequency > 0).slice(0, 3); // Mostrar los 3 más visitados (modificado de 5 a 3)\n\n        console.log('Items más visitados:', mostVisitedItems.length);\n\n        // Asignar a favoriteItems\n        favoriteItems.value = mostVisitedItems;\n      } catch (error) {\n        console.error('Error al actualizar sección de frecuentes:', error);\n      }\n    };\n\n    // Lifecycle hooks\n    onMounted(() => {\n      window.addEventListener('resize', checkMobile);\n      document.addEventListener('keydown', handleKeyboardShortcuts);\n\n      // Cargar el estado expandido de los menús\n      loadExpandedState();\n\n      // Cargar frecuentes basados en el historial\n      updateFrequent();\n      try {\n        // Configurar los listeners para el menú\n        if (navigationItems.value) {\n          menuListenersCleanup.value = setupMenuListeners(navigationItems.value, updatedItems => {\n            if (updatedItems) {\n              navigationItems.value = updatedItems;\n            }\n          });\n        }\n      } catch (error) {\n        console.error('Error al configurar listeners del menú:', error);\n      }\n\n      // Solo mantener el listener para actualización de frecuentes\n      // Ya que puede ser usado en otros lugares\n      window.addEventListener('frequent-updated', updateFrequent);\n    });\n    onBeforeUnmount(() => {\n      window.removeEventListener('resize', checkMobile);\n      document.removeEventListener('keydown', handleKeyboardShortcuts);\n\n      // Eliminar el listener de frecuentes\n      window.removeEventListener('frequent-updated', updateFrequent);\n\n      // Llamar a la función de limpieza de los listeners\n      if (menuListenersCleanup.value) {\n        menuListenersCleanup.value();\n      }\n    });\n\n    // Cargar estado de expansión del menú\n    const loadExpandedState = () => {\n      try {\n        const expandedState = JSON.parse(localStorage.getItem('menuExpandedState') || '{}');\n\n        // Función recursiva para aplicar el estado guardado\n        const applyExpandedState = items => {\n          items.forEach(item => {\n            if (item.id && expandedState[item.id] !== undefined) {\n              item.expanded = expandedState[item.id];\n            }\n            if (item.children && item.children.length > 0) {\n              applyExpandedState(item.children);\n            }\n          });\n        };\n        applyExpandedState(navigationItems.value);\n      } catch (error) {\n        console.error('Error al cargar el estado expandido del menú:', error);\n      }\n    };\n    return {\n      isMobile,\n      logoSrc,\n      navigationItems,\n      searchQuery,\n      highlightedIndex,\n      highlightedType,\n      searchCache,\n      favoriteItems,\n      showVisitCount,\n      flattenedFilteredItems,\n      filteredQuickActions,\n      hasSearchResults,\n      closeSidebar,\n      filterItems,\n      highlightText,\n      highlightSuggestion,\n      handleItemClick,\n      handleSuggestionClick,\n      applyMainSuggestion,\n      applySectionSuggestion,\n      applyActionSuggestion,\n      handleSuggestionHighlight,\n      handleSuggestionSelect,\n      updateFrequent,\n      registerVisit\n    };\n  }\n};","map":{"version":3,"names":["ref","computed","onMounted","onBeforeUnmount","useStore","SearchBar","MenuItem","navigationConfig","setupMenuListeners","Heart","X","name","components","props","isOpen","type","Boolean","default","emits","setup","emit","store","isMobile","window","innerWidth","searchQuery","menuListenersCleanup","highlightedIndex","highlightedType","searchCache","Map","favoriteItems","showVisitCount","navigationItems","logoSrc","getters","flattenedNavigationItems","flattened","flatten","items","parentPath","forEach","item","currentPath","text","flatItem","parent","push","children","length","value","prepareSearchTerms","query","toLowerCase","trim","split","itemMatchesSearch","queryTerms","itemText","every","term","includes","flattenedFilteredItems","filter","filteredQuickActions","hasSearchResults","closeSidebar","checkMobile","filterItems","saveRecentSearch","recentSearches","JSON","parse","localStorage","getItem","filteredSearches","search","unshift","limitedSearches","slice","setItem","stringify","error","console","highlightText","escapedQuery","replace","regex","RegExp","handleItemClick","registerVisit","href","location","handleSuggestionClick","visitHistory","itemPath","itemId","isFirstVisit","oldCount","log","updateFrequent","setTimeout","allItems","document","querySelectorAll","el","textElement","querySelector","textContent","classList","add","remove","handleKeyboardShortcuts","event","ctrlKey","metaKey","key","preventDefault","searchBar","focus","handleSuggestionHighlight","index","handleSuggestionSelect","suggestion","highlightSuggestion","applyMainSuggestion","applySectionSuggestion","applyActionSuggestion","action","Object","keys","validItems","itemsWithFrequency","map","frequency","sort","a","b","mostVisitedItems","addEventListener","loadExpandedState","updatedItems","removeEventListener","expandedState","applyExpandedState","id","undefined","expanded"],"sources":["C:\\Users\\Pc\\Desktop\\Proyectos\\criwave\\client\\src\\components\\layout\\AppSidebar.vue"],"sourcesContent":["/**\n * @component AppSidebar\n * @description Componente principal que maneja la barra lateral de navegación completa.\n * \n * Responsabilidades:\n * - Estructura principal del sidebar\n * - Manejo de secciones principales (Frecuentes, Menú Principal, etc.)\n * - Estilos globales del sidebar\n * - Variables CSS globales para temas (claro/oscuro)\n * \n * Estructura:\n * - Sección de Frecuentes: Muestra los elementos más visitados\n * - Menú Principal: Lista completa de opciones de navegación\n * - Secciones adicionales según se requiera\n */\n\n<template>\n  <div class=\"sidebar-overlay\" v-if=\"isOpen && isMobile\" @click=\"closeSidebar\"></div>\n  <aside class=\"app-sidebar\" :class=\"{ 'is-open': isOpen }\">\n    <div class=\"sidebar-header\">\n      <div class=\"logo-container\">\n        <img :src=\"logoSrc\" alt=\"Leadwave\" class=\"sidebar-logo\" />\n      </div>\n      <button class=\"close-button\" @click=\"closeSidebar\" aria-label=\"Cerrar menú\">\n        <X size=\"20\" />\n      </button>\n    </div>\n    \n    <div class=\"search-box\">\n      <search-bar \n        @search=\"filterItems\" \n        ref=\"searchBar\" \n        placeholder=\"Buscar recursos...\"\n        :has-results=\"hasSearchResults\"\n      >\n        <template #suggestions>\n          <div v-if=\"searchQuery\" class=\"search-suggestions\">\n            <div v-if=\"flattenedFilteredItems.length === 0\" class=\"no-results\">\n              No se encontraron resultados para \"<span class=\"highlight\">{{ searchQuery }}</span>\"\n          </div>\n          \n            <div v-else>\n            <div \n                v-for=\"(item, index) in flattenedFilteredItems\" \n                :key=\"`suggestion-${item.id}-${index}`\"\n              class=\"suggestion-item\"\n                :class=\"{ selected: highlightedIndex === index && highlightedType === 'menu' }\"\n                @click=\"handleSuggestionClick(item)\"\n                @mouseenter=\"highlightSuggestion(index, 'menu')\"\n              >\n                <div class=\"suggestion-content\">\n                  <div class=\"suggestion-title\" v-html=\"highlightText(item.text)\"></div>\n                  <div v-if=\"item.parent\" class=\"suggestion-parent\">\n                    {{ item.parent }}\n            </div>\n                </div>\n              </div>\n            </div>\n          </div>\n        </template>\n      </search-bar>\n    </div>\n    \n    <nav class=\"sidebar-nav\">\n      <!-- Sección de Frecuentes reimplementada -->\n      <div v-if=\"favoriteItems.length > 0 && !searchQuery\" class=\"nav-section-frequents\">\n        <div class=\"section-title\">Frecuentes</div>\n        <ul class=\"nav-list\">\n          <li class=\"nav-item\" v-for=\"(item, index) in favoriteItems\" :key=\"`favorite-${index}`\">\n            <a \n              :href=\"item.href\" \n              class=\"nav-link\"\n              @click.prevent=\"handleItemClick(item)\"\n            >\n              <span class=\"nav-icon\">\n                <Heart size=\"16\" />\n              </span>\n              <span class=\"nav-text\">\n                {{ item.text }}\n                <span v-if=\"item.parent\" class=\"parent-indicator\">{{ item.parent }}</span>\n              </span>\n            </a>\n          </li>\n        </ul>\n      </div>\n      \n      <!-- Renderizado recursivo de elementos de menú -->\n      <template v-if=\"!searchQuery\">\n        <menu-item \n          v-for=\"item in navigationItems\" \n          :key=\"item.id\" \n          :item=\"item\"\n          @item-click=\"handleItemClick\"\n        />\n      </template>\n      \n      <!-- Resultados de búsqueda -->\n      <template v-else>\n        <div v-if=\"flattenedFilteredItems.length > 0\" class=\"search-results-section\">\n          <div class=\"section-title\">Resultados</div>\n          <ul class=\"nav-list\">\n            <li class=\"nav-item\" v-for=\"(item, index) in flattenedFilteredItems\" :key=\"`search-${index}`\">\n              <a \n                :href=\"item.href\" \n                class=\"nav-link\"\n                @click.prevent=\"handleItemClick(item)\"\n              >\n                <span class=\"nav-text\" v-html=\"highlightText(item.text)\"></span>\n                <span v-if=\"item.badge\" class=\"nav-badge\">{{ item.badge }}</span>\n                <span v-if=\"item.parent\" class=\"item-parent\">{{ item.parent }}</span>\n              </a>\n            </li>\n          </ul>\n        </div>\n      </template>\n      \n      <!-- Mensaje cuando no hay resultados en ninguna categoría -->\n      <div class=\"no-results-container\" v-if=\"searchQuery && !hasSearchResults\">\n        <div class=\"no-results-text\">\n          No se encontraron resultados para \"<strong>{{ searchQuery }}</strong>\"\n        </div>\n        <div class=\"no-results-hint\">\n          Intenta con otros términos o revisa la ortografía\n        </div>\n      </div>\n    </nav>\n  </aside>\n</template>\n\n<script>\n/**\n * Componente de menú lateral\n * \n * Se muestra al hacer clic en el logo del header\n * Contiene enlaces a las diferentes secciones de la aplicación\n * \n * @component AppSidebar\n */\nimport { ref, computed, onMounted, onBeforeUnmount } from 'vue';\nimport { useStore } from 'vuex';\nimport SearchBar from '../ui/SearchBar.vue';\nimport MenuItem from './MenuItem.vue';\nimport { navigationConfig } from '../../config/navigation';\nimport { setupMenuListeners } from './MenuListeners';\nimport { Heart, X } from 'lucide-vue-next';\n\nexport default {\n  name: 'AppSidebar',\n  \n  components: {\n    SearchBar,\n    MenuItem,\n    Heart,\n    X\n  },\n  \n  props: {\n    /**\n     * Indica si el sidebar está abierto o cerrado\n     */\n    isOpen: {\n      type: Boolean,\n      default: false\n    }\n  },\n  \n  emits: ['close'],\n  \n  setup(props, { emit }) {\n    const store = useStore();\n    const isMobile = ref(window.innerWidth <= 768);\n    const searchQuery = ref('');\n    \n    // Referencia para almacenar la función de limpieza de los listeners\n    const menuListenersCleanup = ref(null);\n      \n      // Información sobre la sugerencia resaltada actualmente\n    const highlightedIndex = ref(-1);\n    const highlightedType = ref(''); // 'menu', 'action'\n      \n      // Cache para resultados de búsqueda\n    const searchCache = ref(new Map());\n\n    // Favoritos dinámicos - guardar historial de visitas\n    const favoriteItems = ref([]);\n    \n    // Los contadores de visitas no se muestran, ya que el orden indica la relevancia\n    const showVisitCount = ref(false);\n    \n    // Config de navegación - cargar desde archivo de configuración\n    const navigationItems = ref(navigationConfig);\n    \n    // Computed properties\n    \n    // Determina la imagen del logo según el tema actual\n    const logoSrc = computed(() => {\n      return store.getters['theme/isDark'] ? '/img/criwavelogo.png' : '/img/criwavelogoN.png';\n    });\n    \n    // Aplanar la estructura jerárquica de elementos de navegación para la búsqueda\n    const flattenedNavigationItems = computed(() => {\n      const flattened = [];\n      \n      // Función recursiva para aplanar la estructura\n      const flatten = (items, parentPath = null) => {\n        items.forEach(item => {\n          // Determinar la ruta completa de jerarquía\n          const currentPath = parentPath ? `${parentPath} > ${item.text}` : item.text;\n          \n          // Crear una copia del elemento con información del padre si existe\n          const flatItem = {\n            ...item,\n            parent: parentPath\n          };\n          \n          // Añadir a la lista aplanada\n          flattened.push(flatItem);\n          \n          // Procesar hijos si existen\n          if (item.children && item.children.length > 0) {\n            flatten(item.children, currentPath);\n          }\n        });\n      };\n      \n      // Comenzar el proceso de aplanamiento\n      flatten(navigationItems.value);\n      \n      return flattened;\n    });\n    \n    // Funciones para filtrar elementos según la búsqueda\n    const prepareSearchTerms = (query) => {\n      return query.toLowerCase().trim().split(/\\s+/);\n    };\n    \n    const itemMatchesSearch = (item, queryTerms) => {\n      const itemText = item.text.toLowerCase();\n      // Verificar si todos los términos de búsqueda están en el texto del elemento\n      return queryTerms.every(term => itemText.includes(term));\n    };\n    \n    // Filtrar elementos de navegación aplanados para resultados de búsqueda\n    const flattenedFilteredItems = computed(() => {\n      if (!searchQuery.value) return [];\n      \n      const queryTerms = prepareSearchTerms(searchQuery.value);\n      \n      return flattenedNavigationItems.value.filter(item => \n        itemMatchesSearch(item, queryTerms)\n      );\n    });\n    \n    // Filtra las acciones rápidas según la búsqueda\n    const filteredQuickActions = computed(() => {\n      return []; // Ya no hay acciones rápidas\n    });\n    \n    // Verifica si hay resultados en la búsqueda actual\n    const hasSearchResults = computed(() => {\n      // Si no hay consulta, siempre hay resultados\n      if (!searchQuery.value) return true;\n      \n      // Verifica si hay algún elemento en los resultados filtrados\n      return flattenedFilteredItems.value.length > 0;\n    });\n    \n    // Métodos\n    \n    // Cierra el sidebar\n    const closeSidebar = () => {\n      emit('close');\n    };\n    \n    // Comprueba si el dispositivo es móvil\n    const checkMobile = () => {\n      isMobile.value = window.innerWidth <= 768;\n    };\n    \n    // Actualiza la consulta de búsqueda\n    const filterItems = (query) => {\n      // Si la consulta es la misma, no hacer nada\n      if (searchQuery.value === query) return;\n      \n      searchQuery.value = query;\n      highlightedIndex.value = -1;\n      highlightedType.value = '';\n      \n      // Guarda la consulta en el almacenamiento local para persistencia\n      if (query && query.length > 2) {\n        saveRecentSearch(query);\n      }\n    };\n    \n    // Guarda una búsqueda reciente en el almacenamiento local\n    const saveRecentSearch = (query) => {\n      try {\n        // Obtener búsquedas recientes almacenadas\n        const recentSearches = JSON.parse(localStorage.getItem('recentSearches') || '[]');\n        \n        // Eliminar duplicados\n        const filteredSearches = recentSearches.filter(search => search !== query);\n        \n        // Añadir la nueva búsqueda al principio\n        filteredSearches.unshift(query);\n        \n        // Mantener sólo las 5 búsquedas más recientes\n        const limitedSearches = filteredSearches.slice(0, 5);\n        \n        // Guardar en localStorage\n        localStorage.setItem('recentSearches', JSON.stringify(limitedSearches));\n      } catch (error) {\n        console.error('Error al guardar búsqueda reciente:', error);\n      }\n    };\n    \n    // Resalta texto en los resultados de búsqueda\n    const highlightText = (text) => {\n      if (!searchQuery.value) return text;\n      \n      const escapedQuery = searchQuery.value.replace(/[.*+?^${}()|[\\]\\\\]/g, '\\\\$&');\n      const regex = new RegExp(`(${escapedQuery})`, 'gi');\n      \n      return text.replace(regex, '<span class=\"highlight\">$1</span>');\n    };\n    \n    // Maneja clic en elementos del menú\n    const handleItemClick = (item) => {\n      // Registrar visita para estadísticas de favoritos\n      registerVisit(item);\n      \n      // Navegar a la página solo si tiene href y no tiene hijos, o si explícitamente tiene href\n      if (item.href && (!item.children || item.children.length === 0)) {\n        window.location.href = item.href;\n      }\n      \n      // Cerrar el sidebar en dispositivos móviles\n      if (isMobile.value) {\n        closeSidebar();\n      }\n    };\n    \n    // Maneja clic en sugerencia\n    const handleSuggestionClick = (item) => {\n      handleItemClick(item);\n    };\n    \n    // Función para registrar visitas y actualizar frecuentes\n    const registerVisit = (item) => {\n      try {\n        // Intentar obtener el historial existente\n        const visitHistory = JSON.parse(localStorage.getItem('visitHistory') || '{}');\n        \n        // Asegurarse de que el item tenga href\n        if (!item.href) {\n          return; // Salir si no hay href definido\n        }\n        \n        // Crear un ID único para el elemento basado en su texto y href\n        // Si hay un padre, incluirlo en el ID para distinguir elementos con el mismo nombre\n        const itemPath = item.parent ? `${item.parent} > ${item.text}` : item.text;\n        const itemId = `${itemPath}-${item.href}`;\n        \n        // Verificar si es la primera visita (para animación)\n        const isFirstVisit = !visitHistory[itemId];\n        const oldCount = visitHistory[itemId] || 0;\n        \n        // Incrementar contador o inicializarlo\n        visitHistory[itemId] = oldCount + 1;\n        \n        // Imprimir para depuración (podemos quitar después)\n        console.log(`Registrando visita para: ${itemPath}, contador: ${visitHistory[itemId]}`);\n        \n        // Guardar en localStorage\n        localStorage.setItem('visitHistory', JSON.stringify(visitHistory));\n        \n        // Actualizar frecuentes basados en el historial\n        updateFrequent();\n        \n        // Agregar efecto visual (parpadeo) al elemento si es el primero\n        if (isFirstVisit) {\n          setTimeout(() => {\n            // Buscar el elemento relevante y agregar una clase de animación\n            const allItems = document.querySelectorAll('.nav-link');\n            allItems.forEach(el => {\n              const textElement = el.querySelector('.nav-text');\n              if (textElement && textElement.textContent.includes(item.text)) {\n                el.classList.add('just-visited');\n                setTimeout(() => {\n                  el.classList.remove('just-visited');\n                }, 1000);\n              }\n            });\n          }, 100);\n        }\n      } catch (error) {\n        console.error('Error al registrar visita:', error);\n      }\n    };\n    \n    // Maneja los atajos de teclado\n    const handleKeyboardShortcuts = (event) => {\n      // Ctrl/Cmd + K para enfocar el buscador\n      if ((event.ctrlKey || event.metaKey) && event.key === 'k') {\n        event.preventDefault();\n        const searchBar = document.querySelector('.search-input');\n        if (searchBar) {\n          searchBar.focus();\n        }\n      }\n    };\n    \n    // Maneja la selección de sugerencias\n    const handleSuggestionHighlight = (index) => {\n      // Para log si es necesario\n      console.log('Sugerencia resaltada:', index);\n    };\n    \n    const handleSuggestionSelect = (suggestion) => {\n      // Para log si es necesario\n      console.log('Sugerencia seleccionada:', suggestion);\n    };\n    \n    // Resalta una sugerencia\n    const highlightSuggestion = (index, type) => {\n      highlightedIndex.value = index;\n      highlightedType.value = type;\n    };\n    \n    // Implementar funciones para aplicar sugerencias\n    const applyMainSuggestion = (item) => {\n      handleItemClick(item);\n    };\n    \n    const applySectionSuggestion = (item) => {\n      handleItemClick(item);\n    };\n    \n    const applyActionSuggestion = (action) => {\n      if (action && action.action) {\n        action.action();\n      }\n    };\n    \n    // Actualizar frecuentes basados en el historial de visitas\n    const updateFrequent = () => {\n      try {\n        // Obtener historial de visitas\n        const visitHistory = JSON.parse(localStorage.getItem('visitHistory') || '{}');\n        \n        // Si no hay historial, no mostrar frecuentes\n        if (Object.keys(visitHistory).length === 0) {\n          favoriteItems.value = [];\n          return;\n        }\n        \n        // Obtener todos los elementos aplanados para encontrar los más visitados\n        const allItems = flattenedNavigationItems.value;\n        \n        // Imprimir información de depuración (podemos quitar después)\n        console.log('Items aplanados:', allItems.length);\n        \n        // Filtrar elementos sin href\n        const validItems = allItems.filter(item => item.href);\n        \n        // Crear array de elementos con su frecuencia de visitas\n        const itemsWithFrequency = validItems.map(item => {\n          // Crear una clave con el formato que usamos al guardar\n          const itemPath = item.parent ? `${item.parent} > ${item.text}` : item.text;\n          const itemId = `${itemPath}-${item.href}`;\n          \n          const frequency = visitHistory[itemId] || 0;\n          \n          // Imprimir elementos con frecuencia (podemos quitar después)\n          if (frequency > 0) {\n            console.log(`Item: ${itemPath}, frecuencia: ${frequency}`);\n          }\n          \n          return {\n            ...item,\n            frequency\n          };\n        });\n        \n        // Ordenar por frecuencia de visitas (descendente)\n        itemsWithFrequency.sort((a, b) => b.frequency - a.frequency);\n        \n        // Tomar los elementos más visitados (con al menos 1 visita)\n        const mostVisitedItems = itemsWithFrequency\n          .filter(item => item.frequency > 0)\n          .slice(0, 3); // Mostrar los 3 más visitados (modificado de 5 a 3)\n        \n        console.log('Items más visitados:', mostVisitedItems.length);\n        \n        // Asignar a favoriteItems\n        favoriteItems.value = mostVisitedItems;\n        \n      } catch (error) {\n        console.error('Error al actualizar sección de frecuentes:', error);\n      }\n    };\n    \n    // Lifecycle hooks\n    onMounted(() => {\n      window.addEventListener('resize', checkMobile);\n      document.addEventListener('keydown', handleKeyboardShortcuts);\n      \n      // Cargar el estado expandido de los menús\n      loadExpandedState();\n      \n      // Cargar frecuentes basados en el historial\n      updateFrequent();\n      \n      try {\n        // Configurar los listeners para el menú\n        if (navigationItems.value) {\n          menuListenersCleanup.value = setupMenuListeners(navigationItems.value, (updatedItems) => {\n            if (updatedItems) {\n              navigationItems.value = updatedItems;\n            }\n          });\n        }\n      } catch (error) {\n        console.error('Error al configurar listeners del menú:', error);\n      }\n      \n      // Solo mantener el listener para actualización de frecuentes\n      // Ya que puede ser usado en otros lugares\n      window.addEventListener('frequent-updated', updateFrequent);\n    });\n    \n    onBeforeUnmount(() => {\n      window.removeEventListener('resize', checkMobile);\n      document.removeEventListener('keydown', handleKeyboardShortcuts);\n      \n      // Eliminar el listener de frecuentes\n      window.removeEventListener('frequent-updated', updateFrequent);\n      \n      // Llamar a la función de limpieza de los listeners\n      if (menuListenersCleanup.value) {\n        menuListenersCleanup.value();\n      }\n    });\n    \n    // Cargar estado de expansión del menú\n    const loadExpandedState = () => {\n      try {\n        const expandedState = JSON.parse(localStorage.getItem('menuExpandedState') || '{}');\n        \n        // Función recursiva para aplicar el estado guardado\n        const applyExpandedState = (items) => {\n          items.forEach(item => {\n            if (item.id && expandedState[item.id] !== undefined) {\n              item.expanded = expandedState[item.id];\n            }\n            if (item.children && item.children.length > 0) {\n              applyExpandedState(item.children);\n            }\n          });\n        };\n        \n        applyExpandedState(navigationItems.value);\n      } catch (error) {\n        console.error('Error al cargar el estado expandido del menú:', error);\n      }\n    };\n    \n    return {\n      isMobile,\n      logoSrc,\n      navigationItems,\n      searchQuery,\n      highlightedIndex,\n      highlightedType,\n      searchCache,\n      favoriteItems,\n      showVisitCount,\n      flattenedFilteredItems,\n      filteredQuickActions,\n      hasSearchResults,\n      closeSidebar,\n      filterItems,\n      highlightText,\n      highlightSuggestion,\n      handleItemClick,\n      handleSuggestionClick,\n      applyMainSuggestion,\n      applySectionSuggestion,\n      applyActionSuggestion,\n      handleSuggestionHighlight,\n      handleSuggestionSelect,\n      updateFrequent,\n      registerVisit\n    };\n  }\n};\n</script>\n\n<style scoped>\n/* ========================================\n   ESTILOS GLOBALES DEL SIDEBAR\n   ======================================== */\n\n/* Variables CSS globales - Usadas en todo el sidebar */\n:root {\n  --sidebar-width: 280px;\n  --sidebar-bg: #ffffff;\n  --sidebar-bg-dark: #1a1a1a;\n  --text-primary: #333333;\n  --text-secondary: #666666;\n  --primary: #0066cc;\n  --bg-hover: rgba(0, 0, 0, 0.05);\n}\n\n/* Estilos base del sidebar */\n.sidebar {\n  width: var(--sidebar-width);\n  background: var(--sidebar-bg);\n  height: 100vh;\n  overflow-y: auto;\n}\n\n/* ========================================\n   SECCIÓN DE FRECUENTES\n   ======================================== */\n.nav-section-frequents {\n  margin-bottom: 1rem;\n}\n\n/* Estilos específicos para elementos frecuentes */\n.nav-section-frequents .nav-link {\n  /* Estos estilos son específicos de la sección de frecuentes */\n  padding: 0.45rem 1rem;\n}\n\n/* ========================================\n   MODO OSCURO\n   ======================================== */\n@media (prefers-color-scheme: dark) {\n  :root {\n    /* Variables específicas para modo oscuro */\n    --sidebar-bg: var(--sidebar-bg-dark);\n    --text-primary: #ffffff;\n    --text-secondary: #cccccc;\n    --bg-hover: rgba(255, 255, 255, 0.1);\n  }\n}\n\n/* Overlay que oscurece el fondo cuando el sidebar está abierto en móvil */\n.sidebar-overlay {\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background-color: rgba(0, 0, 0, 0.5);\n  z-index: 999;\n  display: none;\n}\n\n@media (max-width: 768px) {\n  .sidebar-overlay {\n    display: block;\n  }\n}\n\n/* Estilos del sidebar */\n.app-sidebar {\n  position: fixed;\n  top: 0;\n  left: 0;\n  bottom: 0;\n  width: 280px;\n  background-color: var(--sidebar-bg);\n  z-index: 1000;\n  transform: translateX(-100%);\n  transition: transform 0.3s ease;\n  box-shadow: var(--sidebar-shadow);\n}\n\n.app-sidebar.is-open {\n  transform: translateX(0);\n}\n\n/* En pantallas grandes, cuando está abierto */\n@media (min-width: 769px) {\n  .app-sidebar {\n    transform: none;\n    box-shadow: var(--sidebar-shadow);\n  }\n}\n\n/* Cabecera del sidebar */\n.sidebar-header {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  padding: 1rem 1rem;\n  border-bottom: none;\n  background-color: var(--bg-secondary);\n  position: relative;\n  width: 100%;\n}\n\n.logo-container {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  flex: 1;\n  padding-right: 36px;\n  margin-left: 8px; /* Añadido para centrar mejor */\n}\n\n.sidebar-logo {\n  height: 36px; /* Aumentado de 32px a 36px */\n  width: auto;\n  transition: transform 0.2s ease;\n  display: block; /* Asegura mejor comportamiento del centrado */\n  margin: 0 auto; /* Ayuda al centrado */\n}\n\n.sidebar-logo:hover {\n  transform: scale(1.05);\n}\n\n/* Botón de cerrar */\n.close-button {\n  background: none;\n  border: none;\n  color: var(--text-primary);\n  opacity: 0.7;\n  cursor: pointer;\n  padding: 8px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  border-radius: 8px;\n  transition: all 0.2s ease;\n  position: absolute;\n  right: 8px; /* Ajustado de 12px a 8px */\n  top: 50%;\n  transform: translateY(-50%);\n}\n\n.close-button:hover {\n  opacity: 1;\n  background-color: var(--bg-hover);\n}\n\n.close-button:active {\n  transform: translateY(-50%) scale(0.95);\n}\n\n/* Estilos base para todos los enlaces del menú */\n.nav-link {\n  display: flex;\n  align-items: center;\n  padding: 0.55rem 1rem;\n  color: var(--text-primary);\n  text-decoration: none;\n  transition: all 0.2s ease;\n  position: relative;\n  border-left: 3px solid transparent;\n}\n\n/* Estilos hover unificados para TODOS los enlaces */\n.nav-link:hover,\n.nav-item .nav-link:hover,\n.nav-section .nav-link:hover,\n.nav-section-frequents .nav-link:hover {\n  background-color: var(--bg-hover);\n  border-left: 3px solid var(--primary);\n  transform: translateX(4px);\n  color: var(--primary);\n}\n\n/* Estilos hover para íconos en TODOS los enlaces */\n.nav-link:hover .nav-icon,\n.nav-item .nav-link:hover .nav-icon,\n.nav-section .nav-link:hover .nav-icon {\n  transform: scale(1.1);\n  opacity: 1;\n  color: var(--primary);\n}\n\n/* Estilos hover para texto en TODOS los enlaces */\n.nav-link:hover .nav-text,\n.nav-item .nav-link:hover .nav-text,\n.nav-section .nav-link:hover .nav-text {\n  color: var(--primary);\n}\n\n/* Estilos base para íconos */\n.nav-icon {\n  width: 20px;\n  height: 20px;\n  margin-right: 0.75rem;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  color: var(--text-secondary);\n  opacity: 0.7;\n  transition: all 0.2s ease;\n}\n\n/* Estilos para el texto del enlace */\n.nav-text {\n  flex: 1;\n  min-width: 0;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  transition: color 0.2s ease;\n}\n\n/* Estilos específicos para la sección de frecuentes que no interfieren con los demás */\n.nav-section-frequents .nav-link {\n  padding: 0.45rem 1rem;\n}\n\n.nav-section-frequents .nav-text {\n  display: flex;\n  flex-direction: column;\n}\n\n.nav-section-frequents .parent-indicator {\n  font-size: 0.7rem;\n  margin-top: 2px;\n  opacity: 0.7;\n  transition: opacity 0.2s ease;\n}\n\n.nav-section-frequents .nav-link:hover .parent-indicator {\n  opacity: 0.9;\n}\n\n/* Modo oscuro unificado */\n@media (prefers-color-scheme: dark) {\n  .nav-link:hover,\n  .nav-item .nav-link:hover,\n  .nav-section .nav-link:hover,\n  .nav-section-frequents .nav-link:hover {\n    background-color: #3D3D3D !important;\n    border-left: 3px solid var(--primary) !important;\n    color: #E0E0E0 !important;\n  }\n\n  .nav-link:hover .nav-icon,\n  .nav-item .nav-link:hover .nav-icon,\n  .nav-section .nav-link:hover .nav-icon,\n  .nav-section-frequents .nav-link:hover .nav-icon {\n    color: var(--primary) !important;\n    opacity: 1;\n  }\n\n  .nav-link:hover .nav-text,\n  .nav-item .nav-link:hover .nav-text,\n  .nav-section .nav-link:hover .nav-text,\n  .nav-section-frequents .nav-link:hover .nav-text {\n    color: #E0E0E0 !important;\n  }\n}\n\n/* Animación de hover para TODOS los elementos */\n@keyframes menuHover {\n  0% {\n    transform: translateX(0);\n  }\n  100% {\n    transform: translateX(4px);\n  }\n}\n\n.nav-link {\n  animation-duration: 0.2s;\n  animation-fill-mode: forwards;\n}\n\n.nav-link:hover {\n  animation-name: menuHover;\n}\n\n/* Navegación */\n.sidebar-nav {\n  flex: 1;\n  overflow-y: auto;\n  padding: 0.5rem 0;\n  scrollbar-width: thin;\n  scrollbar-color: var(--border) var(--bg-primary);\n  background-color: var(--sidebar-bg);\n}\n\n/* Personalización de la barra de desplazamiento para WebKit (Chrome, Safari, etc.) */\n.sidebar-nav::-webkit-scrollbar {\n  width: 6px;\n}\n\n.sidebar-nav::-webkit-scrollbar-track {\n  background: var(--scrollbar-track);\n  border-radius: 3px;\n}\n\n.sidebar-nav::-webkit-scrollbar-thumb {\n  background-color: var(--scrollbar-thumb);\n  border-radius: 3px;\n  opacity: 0.7;\n}\n\n.sidebar-nav::-webkit-scrollbar-thumb:hover {\n  background-color: var(--scrollbar-thumb-hover);\n  opacity: 1;\n}\n\n.nav-list {\n  list-style: none;\n  padding: 0;\n  margin: 0;\n}\n\n.nav-section {\n  margin-top: 0.75rem;\n  padding-top: 0.25rem;\n  border-top: 1px solid var(--border);\n}\n\n.section-title {\n  padding: 0.45rem 1rem 0.5rem;\n  font-size: 0.75rem;\n  color: var(--text-muted, #6c757d);\n  text-transform: uppercase;\n  letter-spacing: 0.5px;\n  font-weight: 600;\n  opacity: 0.85;\n}\n\n.nav-item {\n  margin-bottom: 0;\n}\n\n.nav-link.active {\n  background-color: var(--bg-active);\n  color: var(--text-primary);\n  font-weight: 500;\n}\n\n/* Estilos para acciones rápidas */\n.quick-actions-section {\n  margin-bottom: 1rem;\n  border-bottom: 1px solid var(--border);\n  padding-bottom: 0.5rem;\n}\n\n.quick-action-item {\n  cursor: pointer;\n}\n\n.action-shortcut {\n  margin-left: auto;\n  background-color: var(--bg-secondary);\n  color: var(--text-secondary);\n  padding: 2px 5px;\n  border-radius: 4px;\n  font-size: 0.7rem;\n  font-family: monospace;\n  border: 1px solid var(--border);\n}\n\n/* Estilos para mensajes de no resultados */\n.no-results-container {\n  padding: 2rem 1rem;\n  text-align: center;\n  color: var(--text-secondary);\n  animation: fadeIn 0.3s ease;\n}\n\n.no-results-icon {\n  font-size: 2rem;\n  margin-bottom: 1rem;\n  opacity: 0.7;\n}\n\n.no-results-text {\n  font-size: 0.95rem;\n  margin-bottom: 0.5rem;\n}\n\n.no-results-hint {\n  font-size: 0.85rem;\n  opacity: 0.7;\n}\n\n@media (min-width: 769px) {\n  /* En pantallas grandes, transformar el contenido principal */\n  .app-sidebar {\n    left: 0;\n    transform: translateX(-100%);\n  }\n  \n  .app-sidebar.is-open {\n    transform: translateX(0);\n  }\n}\n\n/* Estilo para texto resaltado */\n:deep(.highlight) {\n  background-color: rgba(var(--primary-rgb), 0.2);\n  border-radius: 3px;\n  padding: 0 2px;\n  font-weight: 500;\n  color: var(--primary);\n}\n\n/* Estilos específicos para las sugerencias */\n:deep(.suggestion-section) {\n  display: block;\n  font-size: 0.7rem;\n  color: var(--text-secondary);\n  opacity: 0.7;\n  margin-bottom: 2px;\n}\n\n:deep(.suggestion-item) {\n  border-left: 2px solid transparent;\n  transition: border-color 0.2s ease, background-color 0.2s ease;\n}\n\n:deep(.suggestion-item.selected),\n:deep(.suggestion-item:hover) {\n  border-left-color: var(--primary);\n  background-color: var(--bg-hover);\n}\n\n/* Estilos específicos para las búsquedas recientes */\n:deep(.search-suggestions),\n:deep(.recent-searches-section) {\n  background-color: var(--search-suggestions-bg);\n  border: 1px solid var(--search-suggestions-border);\n  box-shadow: 0 4px 10px rgba(0, 0, 0, 0.5);\n}\n\n:deep(.suggestions-container) {\n  background-color: var(--search-suggestions-bg);\n  overflow: hidden;\n}\n\n:deep(.suggestion-item),\n:deep(.recent-search-item) {\n  background-color: var(--search-suggestions-bg);\n  border-left: 2px solid transparent;\n  transition: border-color 0.2s ease, background-color 0.2s ease;\n}\n\n:deep(.suggestion-item.selected),\n:deep(.suggestion-item:hover),\n:deep(.recent-search-item:hover) {\n  background-color: var(--search-suggestions-hover);\n  border-left-color: var(--primary);\n  color: var(--search-suggestions-text);\n}\n\n:deep(.suggestion-item .suggestion-icon),\n:deep(.recent-icon) {\n  color: var(--search-suggestions-muted);\n}\n\n:deep(.suggestion-section),\n:deep(.suggestions-section-title) {\n  color: var(--search-suggestions-muted);\n  background-color: var(--search-suggestions-bg);\n}\n\n:deep(.recent-text) {\n  color: var(--search-suggestions-text);\n}\n\n/* Estilos para el indicador de padre */\n.item-parent-indicator {\n  background-color: transparent;\n  color: var(--text-muted, #6c757d);\n  font-size: 0.7rem;\n  display: block;\n  font-style: normal;\n  padding: 0;\n  margin-top: 1px;\n  max-width: 90%;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  opacity: 0.7;\n}\n\n/* Sección de frecuentes */\n.nav-section-frequents {\n  margin-bottom: 1rem;\n}\n\n.nav-section-frequents .nav-link {\n  padding: 0.45rem 1rem;\n  transition: all 0.2s ease;\n  border-left: 3px solid transparent;\n}\n\n.nav-section-frequents .nav-text {\n  display: flex;\n  flex-direction: column;\n}\n\n.nav-section-frequents .nav-icon {\n  width: 20px;\n  height: 20px;\n  margin-right: 0.75rem;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  color: var(--text-secondary);\n  opacity: 0.7;\n  transition: all 0.2s ease;\n}\n\n.nav-section-frequents .nav-link:hover {\n  background-color: var(--bg-hover);\n  border-left-color: var(--primary);\n  transform: translateX(4px);\n}\n\n.nav-section-frequents .nav-link:hover .nav-icon {\n  transform: scale(1.1);\n  opacity: 1;\n  color: var(--primary);\n}\n\n.nav-section-frequents .nav-link:hover .nav-text {\n  color: var(--primary);\n}\n\n.nav-section-frequents .parent-indicator {\n  font-size: 0.7rem;\n  margin-top: 2px;\n  opacity: 0.7;\n  transition: opacity 0.2s ease;\n}\n\n.nav-section-frequents .nav-link:hover .parent-indicator {\n  opacity: 0.9;\n}\n\n/* Animaciones para elementos del menú */\n@keyframes menuHover {\n  0% {\n    transform: translateX(0);\n  }\n  100% {\n    transform: translateX(4px);\n  }\n}\n\n.nav-link {\n  animation-duration: 0.2s;\n  animation-fill-mode: forwards;\n}\n\n.nav-link:hover {\n  animation-name: menuHover;\n}\n\n/* Modo claro */\n:root {\n  --parent-indicator-light: rgba(0, 0, 0, 0.5);\n  --parent-indicator-dark: rgba(255, 255, 255, 0.7);\n}\n\n.app-sidebar .nav-section-frequents .parent-indicator {\n  color: var(--parent-indicator-light);\n}\n\n/* Modo oscuro */\n@media (prefers-color-scheme: dark) {\n  .app-sidebar .nav-section-frequents .parent-indicator {\n    color: var(--parent-indicator-dark);\n  }\n}\n\n/* Estilos para los resultados de búsqueda */\n.search-results-section {\n  margin-top: 0.5rem;\n}\n\n.search-results-section .nav-link {\n  padding: 0.55rem 1rem;\n}\n\n/* Animación de primer clic */\n.just-visited {\n  animation: pulse 1s ease;\n}\n\n@keyframes pulse {\n  0% {\n    background-color: var(--bg-primary);\n  }\n  50% {\n    background-color: var(--bg-hover);\n  }\n  100% {\n    background-color: var(--bg-primary);\n  }\n}\n\n/* Unificar estilos del modo oscuro */\n@media (prefers-color-scheme: dark) {\n  .app-sidebar {\n    background-color: #000000;\n    box-shadow: none;\n  }\n  \n  .sidebar-header {\n    background-color: #000000;\n    border-bottom: none;\n  }\n  \n  /* Estilos específicos para las búsquedas recientes */\n  :deep(.search-suggestions),\n  :deep(.recent-searches-section) {\n    background-color: var(--search-suggestions-bg);\n    border: 1px solid var(--search-suggestions-border);\n    box-shadow: 0 4px 10px rgba(0, 0, 0, 0.5);\n  }\n  \n  :deep(.suggestions-container) {\n    background-color: var(--search-suggestions-bg);\n    overflow: hidden;\n  }\n\n  :deep(.suggestion-item),\n  :deep(.recent-search-item) {\n    background-color: var(--search-suggestions-bg);\n  border-left: 2px solid transparent;\n  transition: border-color 0.2s ease, background-color 0.2s ease;\n}\n\n:deep(.suggestion-item.selected),\n  :deep(.suggestion-item:hover),\n  :deep(.recent-search-item:hover) {\n    background-color: var(--search-suggestions-hover);\n  border-left-color: var(--primary);\n    color: var(--search-suggestions-text);\n  }\n\n  :deep(.suggestion-item .suggestion-icon),\n  :deep(.recent-icon) {\n    color: var(--search-suggestions-muted);\n  }\n\n  :deep(.suggestion-section),\n  :deep(.suggestions-section-title) {\n    color: var(--search-suggestions-muted);\n    background-color: var(--search-suggestions-bg);\n  }\n  \n  :deep(.recent-text) {\n    color: var(--search-suggestions-text);\n  }\n  \n  /* Resto de los estilos para el sidebar... */\n  .nav-link:hover,\n  .nav-item .nav-link:hover,\n  .nav-section .nav-link:hover {\n    background-color: #3D3D3D !important;\n    border-left: 3px solid #555555;\n    padding-left: calc(1rem - 3px);\n    color: #E0E0E0 !important;\n  }\n  \n  .search-box {\n    margin: 0.5rem 0.75rem;\n  }\n  \n  .search-box .search-input-wrapper {\n    background-color: var(--search-bar-bg);\n    border-color: var(--search-bar-border);\n    box-shadow: none;\n    border-radius: 4px;\n  }\n  \n  .search-box .search-input-wrapper.has-focus {\n    background-color: var(--search-bar-bg-focus);\n    border-color: var(--primary);\n    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.2);\n  }\n\n  .search-box .search-input {\n    color: var(--search-suggestions-text);\n    background-color: transparent;\n  }\n\n  .search-box .search-icon {\n    color: var(--search-icon-color);\n  }\n  \n  .search-box .search-input::placeholder {\n    color: var(--search-icon-color);\n  }\n  \n  .quick-action-item:hover .nav-link,\n  .quick-action-item .nav-link:hover {\n    background-color: var(--nav-link-hover-bg) !important;\n    border-left: var(--nav-border-indicator-width) solid var(--nav-border-indicator-color);\n    padding-left: calc(var(--nav-link-padding-x) - var(--nav-border-indicator-width));\n    color: var(--nav-link-hover-text-color) !important;\n  }\n  \n  .item-parent-indicator,\n  .item-parent,\n  .section-title {\n    color: var(--section-title-color);\n  }\n  \n  .suggestion-item:hover,\n  .suggestion-item.selected {\n    background-color: var(--nav-link-hover-bg) !important;\n    border-left-color: var(--nav-border-indicator-color);\n    color: var(--nav-link-hover-text-color) !important;\n  }\n\n  .nav-link.active,\n  .nav-item .nav-link.active {\n    background-color: var(--nav-link-active-bg) !important;\n    border-left: var(--nav-border-indicator-width) solid var(--nav-border-indicator-active-color);\n    padding-left: calc(var(--nav-link-padding-x) - var(--nav-border-indicator-width));\n    color: var(--nav-link-active-color) !important;\n  }\n  \n  .nav-link.selected,\n  .nav-item .nav-link.selected {\n    background-color: var(--nav-link-active-bg) !important;\n    border-left: var(--nav-border-indicator-width) solid var(--nav-border-indicator-active-color);\n    padding-left: calc(var(--nav-link-padding-x) - var(--nav-border-indicator-width));\n    color: var(--nav-link-active-color) !important;\n  }\n  \n  .nav-section .nav-link:hover,\n  .nav-section .nav-link:hover .nav-text,\n  .nav-section .nav-link:hover .nav-icon {\n    background-color: var(--nav-link-hover-bg) !important;\n    color: var(--nav-link-hover-text-color) !important;\n  }\n  \n  /* Asegurar que todos los textos sean visibles al hacer hover */\n  .nav-link:hover .nav-text,\n  .nav-link:hover .item-parent-indicator,\n  .quick-action-item:hover .nav-text {\n    color: var(--nav-link-hover-text-color) !important;\n  }\n  \n  /* Reducimos los selectores específicos y utilizamos variables globales */\n  .app-sidebar a:hover,\n  .app-sidebar .nav-link:hover,\n  .app-sidebar *[class*=\"link\"]:hover,\n  .app-sidebar *[class*=\"item\"]:hover {\n    background-color: var(--nav-link-hover-bg) !important;\n    color: var(--nav-link-hover-text-color) !important;\n    border-color: var(--nav-border-indicator-color) !important;\n  }\n  \n  /* Estilos específicos para la sección de Frecuentes reimplementada */\n  .nav-section-frequents .nav-link:hover {\n    background-color: var(--nav-link-hover-bg) !important;\n    border-left: var(--nav-border-indicator-width) solid var(--nav-border-indicator-color);\n    padding-left: calc(var(--nav-link-padding-x) - var(--nav-border-indicator-width));\n    color: var(--nav-link-hover-text-color) !important;\n  }\n  \n  .nav-section-frequents .parent-indicator {\n    color: var(--section-title-color);\n  }\n  \n  .nav-section-frequents .nav-link:hover .nav-text,\n  .nav-section-frequents .nav-link:hover .parent-indicator {\n    color: var(--nav-link-hover-text-color) !important;\n  }\n}\n\n/* Estilos para el buscador en el sidebar */\n.search-box {\n  margin: 0.5rem 0.75rem;\n}\n\n/* Resto de estilos del sidebar */\n.sidebar-nav {\n  flex: 1;\n  overflow-y: auto;\n  padding-bottom: 1rem;\n  background-color: var(--sidebar-bg);\n}\n\n/* Estilos para el tema oscuro */\n@media (prefers-color-scheme: dark) {\n  .app-sidebar {\n    background-color: #000000;\n    box-shadow: none;\n  }\n  \n  .sidebar-header {\n    background-color: #000000;\n    border-bottom: none;\n  }\n\n  /* Resto de estilos del sidebar en dark mode */\n}\n\n/* Estilos para el ícono de favoritos */\n.nav-section-frequents .nav-icon {\n  font-size: 0.9em;\n  opacity: 0.85;\n}\n\n.nav-section-frequents .nav-link:hover .nav-icon {\n  opacity: 1;\n}\n\n/* Ajuste del color del texto para el menú lateral en modo oscuro */\n:root[data-theme='dark'] .nav-text {\n  color: rgba(255, 255, 255, 0.6); /* Gris más oscuro para todos los textos */\n}\n\n:root[data-theme='dark'] .nav-link:hover .nav-text {\n  color: rgba(255, 255, 255, 0.9); /* Más claro al hacer hover */\n}\n\n:root[data-theme='dark'] .nav-link.active .nav-text {\n  color: rgba(255, 255, 255, 1); /* Blanco completo cuando está activo */\n}\n\n/* Mantener el color original para el modo claro */\n:root:not([data-theme='dark']) .nav-text {\n  color: rgba(0, 0, 0, 0.8);\n}\n\n:root:not([data-theme='dark']) .nav-link:hover .nav-text {\n  color: rgba(0, 0, 0, 0.95);\n}\n\n:root:not([data-theme='dark']) .nav-link.active .nav-text {\n  color: rgba(0, 0, 0, 1);\n}\n\n/* Ajuste para los títulos de sección */\n:root[data-theme='dark'] .section-title {\n  color: rgba(255, 255, 255, 0.4); /* Gris más oscuro para los títulos */\n}\n\n/* Modo oscuro - Ajuste global para todos los elementos del menú */\n:root[data-theme='dark'] {\n  /* Color base para todos los elementos del menú */\n  .nav-link,\n  .nav-text,\n  .nav-item a,\n  .nav-section a,\n  .nav-section-frequents a {\n    color: rgba(255, 255, 255, 0.6) !important;\n  }\n\n  /* Hover para todos los elementos */\n  .nav-link:hover,\n  .nav-text:hover,\n  .nav-item a:hover,\n  .nav-section a:hover,\n  .nav-section-frequents a:hover {\n    color: rgba(255, 255, 255, 0.9) !important;\n  }\n\n  /* Elementos activos */\n  .nav-link.active,\n  .nav-text.active,\n  .nav-item a.active,\n  .nav-section a.active,\n  .nav-section-frequents a.active {\n    color: rgba(255, 255, 255, 1) !important;\n  }\n\n  /* Títulos de sección */\n  .section-title {\n    color: rgba(255, 255, 255, 0.4) !important;\n  }\n\n  /* Íconos */\n  .nav-icon {\n    color: rgba(255, 255, 255, 0.6) !important;\n  }\n\n  /* Indicadores de padre/subtítulos */\n  .parent-indicator,\n  .item-parent {\n    color: rgba(255, 255, 255, 0.4) !important;\n  }\n}\n\n/* Modo claro - mantener los colores originales */\n:root:not([data-theme='dark']) {\n  .nav-link,\n  .nav-text,\n  .nav-item a,\n  .nav-section a {\n    color: rgba(0, 0, 0, 0.8);\n  }\n\n  .nav-link:hover,\n  .nav-text:hover,\n  .nav-item a:hover,\n  .nav-section a:hover {\n    color: rgba(0, 0, 0, 0.95);\n  }\n\n  .nav-link.active,\n  .nav-text.active,\n  .nav-item a.active,\n  .nav-section a.active {\n    color: rgba(0, 0, 0, 1);\n  }\n}\n</style> "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}